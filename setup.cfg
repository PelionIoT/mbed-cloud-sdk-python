[metadata]
license_file = LICENCE

[bdist_wheel]
universal = 1

[coverage:run]
parallel = true
source = mbed_cloud
omit =
    **/tests/*
    **/mbed_cloud/_backends/*
[coverage:report]
[coverage:html]
title = mbed Python SDK coverage
directory = results/coverage.html
[coverage:xml]
output = results/coverage.xml

[flake8]
exclude =
    # unwanted cache items
    .git,
    __pycache__,
    .venv,
    build/,
    # API backends are generated by third party code
    src/mbed_cloud/_backends,
    # Autogenerated and custom code for the Foundation interface is formatted by black
    src/mbed_cloud/foundation,
    # Beta code which need to be improved
    src/mbed_cloud/sdk/config.py,
    # not so concerned about tests
    *tests/,
    # misc explicit excludes
    *__init__.py,
    docs/conf.py,
    setup.py,
    # python3 only
    generate_ci_config.py,
    scripts

max-complexity = 16
max-line-length = 120
ignore = D205, D400,D401,W504
copyright-check = True

[tool:pytest]
# beware: different pytest modules handle interpolation differently
# i.e. pytest-cov - not at all! we defer to the coveragerc file. even that does not handle cross-platform expansion of '~'
addopts = --tb=short --cov=mbed_cloud --cov-report html --cov-report xml --html=results/unittests.html --self-contained-html --junitxml=results/unittests.xml
