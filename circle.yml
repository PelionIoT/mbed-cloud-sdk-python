machine:
  services:
    - docker

dependencies:
  pre:
    - |
      pip install awscli
      login="$(aws ecr get-login --no-include-email)"
      ${login}
      docker pull $TESTRUNNER_DOCKER_IMAGE
  override:
    - pip install tox tox-pyenv
    - pyenv local 2.7.12 3.4.3 3.6.2

test:
  override:
    - tox

deployment:
  production:
    branch: master
    commands:
      - pip install pandoc
      - ./generate-docs.sh
